<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zcc.highmyopia.mapper.IReportFilesMapper">

    <insert id="insertBatch" parameterType="com.zcc.highmyopia.po.ReportFiles">
        insert into report_files (id, report_id, file_type, file_url, is_down_load, file_path, create_time, update_time)
        values
        <foreach item="file" index="index" collection="array" open="(" separator=")," close=")">
            #{file.id}, #{file.reportId}, #{file.fileType}, #{file.fileUrl}, #{file.isDownLoad}, #{file.filePath}, now(), now()
        </foreach>
    </insert>

    <update id="updateReportFiles" parameterType="com.zcc.highmyopia.po.ReportFiles">
        update report_files
        set is_down_load = #{isDownLoad}, file_path = #{filePath}, update_time = now()
        where id = #{id};
    </update>

    <select id="getNotDownLoad" resultType="com.zcc.highmyopia.po.ReportFiles">
        select * from report_files
        where is_down_load = 0
    </select>

</mapper>
